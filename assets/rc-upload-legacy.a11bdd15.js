System.register(["./@babel-legacy.f580aa0a.js","./react-legacy.0e757699.js","./classnames-legacy.5e058700.js","./rc-util-legacy.0b3b3659.js"],(function(e){"use strict";var t,n,r,o,a,i,s,c,u,l,p,f,d,h,v,y;return{setters:[function(e){t=e.c,n=e.d,r=e.e,o=e.i,a=e.f,i=e.n,s=e.g,c=e.b,u=e.o,l=e.r,p=e.k},function(e){f=e.R,d=e.r},function(e){h=e.c},function(e){v=e.w,y=e.v}],execute:function(){function b(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function m(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){var r=e.data[t];Array.isArray(r)?r.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,e.data[t])})),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var n="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),r=new Error(n);return r.status=t.status,r.method=e.method,r.url=e.action,r}(e,t),b(t)):e.onSuccess(b(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};return null!==r["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(e){null!==r[e]&&t.setRequestHeader(e,r[e])})),t.send(n),{abort:function(){t.abort()}}}var k=+new Date,g=0;function w(){return"rc-upload-".concat(k,"-").concat(++g)}var C=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=e.type||"",a=o.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=r.toLowerCase(),i=t.toLowerCase(),s=[i];return".jpg"!==i&&".jpeg"!==i||(s=[".jpg","jpeg"]),s.some((function(e){return n.endsWith(e)}))}return/\/\*$/.test(t)?a===t.replace(/\/.*$/,""):o===t||!!/^\w+$/.test(t)&&(v(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0)}))}return!0},F=function(e,t,n){var r=function e(r,o){r.path=o||"",r.isFile?r.file((function(e){n(e)&&(r.fullPath&&!e.webkitRelativePath&&(Object.defineProperties(e,{webkitRelativePath:{writable:!0}}),e.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(e,{webkitRelativePath:{writable:!1}})),t([e]))})):r.isDirectory&&function(e,t){var n=e.createReader(),r=[];!function e(){n.readEntries((function(n){var o=Array.prototype.slice.apply(n);r=r.concat(o),o.length?e():t(r)}))}()}(r,(function(t){t.forEach((function(t){e(t,"".concat(o).concat(r.name,"/"))}))}))};e.forEach((function(e){r(e.webkitGetAsEntry())}))},E=function(e){t(v,e);var d=n(v);function v(){var e;return r(this,v),(e=d.apply(this,arguments)).state={uid:w()},e.reqs={},e.onChange=function(t){var n=e.props,r=n.accept,a=n.directory,i=t.target.files,s=o(i).filter((function(e){return!a||C(e,r)}));e.uploadFiles(s),e.reset()},e.onClick=function(t){var n=e.fileInput;if(n){var r=e.props,o=r.children,a=r.onClick;if(o&&"button"===o.type){var i=n.parentNode;i.focus(),i.querySelector("button").blur()}n.click(),a&&a(t)}},e.onKeyDown=function(t){"Enter"===t.key&&e.onClick(t)},e.onFileDrop=function(t){var n=e.props.multiple;if(t.preventDefault(),"dragover"!==t.type)if(e.props.directory)F(Array.prototype.slice.call(t.dataTransfer.items),e.uploadFiles,(function(t){return C(t,e.props.accept)}));else{var r=o(t.dataTransfer.files).filter((function(t){return C(t,e.props.accept)}));!1===n&&(r=r.slice(0,1)),e.uploadFiles(r)}},e.uploadFiles=function(t){var n=o(t),r=n.map((function(t){return t.uid=w(),e.processFile(t,n)}));Promise.all(r).then((function(t){var n=e.props.onBatchStart;null==n||n(t.map((function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),t.filter((function(e){return null!==e.parsedFile})).forEach((function(t){e.post(t)}))}))},e.processFile=function(){var t=u(l.mark((function t(n,r){var o,a,i,s,c,u,f,d,h;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.beforeUpload,a=n,!o){t.next=14;break}return t.prev=3,t.next=6,o(n,r);case 6:a=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),a=!1;case 12:if(!1!==a){t.next=14;break}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!=typeof(i=e.props.action)){t.next=21;break}return t.next=18,i(n);case 18:s=t.sent,t.next=22;break;case 21:s=i;case 22:if("function"!=typeof(c=e.props.data)){t.next=29;break}return t.next=26,c(n);case 26:u=t.sent,t.next=30;break;case 29:u=c;case 30:return f="object"!==p(a)&&"string"!=typeof a||!a?n:a,d=f instanceof File?f:new File([f],n.name,{type:n.type}),(h=d).uid=n.uid,t.abrupt("return",{origin:n,data:u,parsedFile:h,action:s});case 35:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}(),e.saveFileInput=function(t){e.fileInput=t},e}return a(v,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(e){var t=this,n=e.data,r=e.origin,o=e.action,a=e.parsedFile;if(this._isMounted){var i=this.props,s=i.onStart,c=i.customRequest,u=i.name,l=i.headers,p=i.withCredentials,f=i.method,d=r.uid,h=c||m,v={action:o,filename:u,data:n,file:a,headers:l,withCredentials:p,method:f||"post",onProgress:function(e){var n=t.props.onProgress;null==n||n(e,a)},onSuccess:function(e,n){var r=t.props.onSuccess;null==r||r(e,a,n),delete t.reqs[d]},onError:function(e,n){var r=t.props.onError;null==r||r(e,n,a),delete t.reqs[d]}};s(r),this.reqs[d]=h(v)}}},{key:"reset",value:function(){this.setState({uid:w()})}},{key:"abort",value:function(e){var t=this.reqs;if(e){var n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n]}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort&&t[e].abort(),delete t[e]}))}},{key:"render",value:function(){var e,t=this.props,n=t.component,r=t.prefixCls,o=t.className,a=t.disabled,u=t.id,l=t.style,p=t.multiple,d=t.accept,v=t.children,b=t.directory,m=t.openFileDialogOnClick,k=t.onMouseEnter,g=t.onMouseLeave,w=t.capture,C=i(t,["component","prefixCls","className","disabled","id","style","multiple","accept","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","capture"]),F=h((s(e={},r,!0),s(e,"".concat(r,"-disabled"),a),s(e,o,o),e)),E=b?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},x=a?{}:{onClick:m?this.onClick:function(){},onKeyDown:m?this.onKeyDown:function(){},onMouseEnter:k,onMouseLeave:g,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return f.createElement(n,c({},x,{className:F,role:"button",style:l}),f.createElement("input",c({},y(C,{aria:!0,data:!0}),{id:u,type:"file",ref:this.saveFileInput,onClick:function(e){return e.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:d},E,{multiple:p,onChange:this.onChange},null!=w?{capture:w}:{})),v)}}]),v}(d.exports.Component);function x(){}e("U",function(e){t(i,e);var o=n(i);function i(){var e;return r(this,i),(e=o.apply(this,arguments)).saveUploader=function(t){e.uploader=t},e}return a(i,[{key:"abort",value:function(e){this.uploader.abort(e)}},{key:"render",value:function(){return f.createElement(E,c({},this.props,{ref:this.saveUploader}))}}]),i}(d.exports.Component)).defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:x,onError:x,onSuccess:x,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0}}}}));

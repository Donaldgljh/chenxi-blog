import{_ as t,b as n,a as o}from"./@babel.023f8892.js";import{R as r}from"./react.eb42bb38.js";import"./prop-types.340e0f81.js";import{d as e,b as i,e as a,l as s}from"./history.96a5ff4b.js";import{i as p}from"./mini-create-react-context.b3c11d8d.js";import{i as c}from"./tiny-invariant.58a6ef66.js";import{p as u}from"./path-to-regexp.d14f35e6.js";import"./react-is.d3744c61.js";import"./hoist-non-react-statics.34f76f75.js";var l=function(t){var n=p();return n.displayName=t,n}("Router-History"),h=function(t){var n=p();return n.displayName=t,n}("Router"),m=function(n){function o(t){var o;return(o=n.call(this,t)||this).state={location:t.history.location},o._isMounted=!1,o._pendingLocation=null,t.staticContext||(o.unlisten=t.history.listen((function(t){o._isMounted?o.setState({location:t}):o._pendingLocation=t}))),o}t(o,n),o.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var e=o.prototype;return e.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},e.componentWillUnmount=function(){this.unlisten&&this.unlisten()},e.render=function(){return r.createElement(h.Provider,{value:{history:this.props.history,location:this.state.location,match:o.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(l.Provider,{children:this.props.children||null,value:this.props.history}))},o}(r.Component);r.Component;var f=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var r=o.prototype;return r.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},r.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},r.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},r.render=function(){return null},o}(r.Component),d={},v=0;function y(t,n){return void 0===t&&(t="/"),void 0===n&&(n={}),"/"===t?t:function(t){if(d[t])return d[t];var n=u.compile(t);return v<1e4&&(d[t]=n,v++),n}(t)(n,{pretty:!0})}function C(t){var o=t.computedMatch,e=t.to,a=t.push,p=void 0!==a&&a;return r.createElement(h.Consumer,null,(function(t){t||c(!1);var a=t.history,u=t.staticContext,l=p?a.push:a.replace,h=i(o?"string"==typeof e?y(e,o.params):n({},e,{pathname:y(e.pathname,o.params)}):e);return u?(l(h),null):r.createElement(f,{onMount:function(){l(h)},onUpdate:function(t,o){var r=i(o.to);s(r,n({},h,{key:r.key}))||l(h)},to:e})}))}var x={},M=0;function E(t,n){void 0===n&&(n={}),("string"==typeof n||Array.isArray(n))&&(n={path:n});var o=n,r=o.path,e=o.exact,i=void 0!==e&&e,a=o.strict,s=void 0!==a&&a,p=o.sensitive,c=void 0!==p&&p;return[].concat(r).reduce((function(n,o){if(!o&&""!==o)return null;if(n)return n;var r=function(t,n){var o=""+n.end+n.strict+n.sensitive,r=x[o]||(x[o]={});if(r[t])return r[t];var e=[],i={regexp:u(t,e,n),keys:e};return M<1e4&&(r[t]=i,M++),i}(o,{end:i,strict:s,sensitive:c}),e=r.regexp,a=r.keys,p=e.exec(t);if(!p)return null;var l=p[0],h=p.slice(1),m=t===l;return i&&!m?null:{path:o,url:"/"===o&&""===l?"/":l,isExact:m,params:a.reduce((function(t,n,o){return t[n.name]=h[o],t}),{})}}),null)}var b=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.render=function(){var t=this;return r.createElement(h.Consumer,null,(function(o){o||c(!1);var e=t.props.location||o.location,i=t.props.computedMatch?t.props.computedMatch:t.props.path?E(e.pathname,t.props):o.match,a=n({},o,{location:e,match:i}),s=t.props,p=s.children,u=s.component,l=s.render;return Array.isArray(p)&&0===p.length&&(p=null),r.createElement(h.Provider,{value:a},a.match?p?"function"==typeof p?p(a):p:u?r.createElement(u,a):l?l(a):null:"function"==typeof p?p(a):null)}))},e}(r.Component);r.Component;var g=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.render=function(){var t=this;return r.createElement(h.Consumer,null,(function(o){o||c(!1);var e,i,a=t.props.location||o.location;return r.Children.forEach(t.props.children,(function(t){if(null==i&&r.isValidElement(t)){e=t;var s=t.props.path||t.props.from;i=s?E(a.pathname,n({},t.props,{path:s})):o.match}})),i?r.cloneElement(e,{location:a,computedMatch:i}):null}))},e}(r.Component),j=r.useContext;function U(){return j(l)}function _(){return j(h).location}export{m as R,g as S,_ as a,b,h as c,C as d,E as m,U as u};
